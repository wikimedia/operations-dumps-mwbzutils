.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.48.3.
.TH RECOMPRESSXML "1" "November 2021" "recompressxml 0.1.4" "User Commands"
.SH NAME
recompressxml \- Bz2 compress MediaWiki XML input in batches of pages
.SH SYNOPSIS
.B recompressxml
\fI\,--pagesperstream n \/\fR[\fI\,--buildindex filename\/\fR] [\fI\,--verbose\/\fR]
.br
.B recompressxml
[\fI\,--version|--help\/\fR]
.SH DESCRIPTION
Reads a stream of XML pages from stdin and writes to stdout the bz2 compressed
data, one bz2 stream (header, blocks, footer) per specified number of pages.
.SH OPTIONS
.TP
\fB\-p\fR, \fB\-\-pagesperstream\fR:
Compress this number of pages in each complete
bz2stream before opening a new stream.  The siteinfo
header is written to a separate stream at the beginning
of all output, and the closing mediawiki tag is written
into a separate stream at the end.
.TP
\fB\-b\fR, \fB\-\-buildindex\fR:
Generate a file containing an index of pages ids and titles
per stream.  Each line contains: offset\-to\-stream:pageid:pagetitle
If filename ends in '.bz2' or '.bz2' plus a file extension .[a\-z]*,
the file will be written in bz2 format; if it ends in '.gz' or
\&'.gz' plus a file extension .[a\-z]*, it wll be written in gz format.
.TP
\fB\-i\fR  \fB\-\-inpath\fR:
If not specified, input stream will be read from stdin. Otherwise,
it will be read from the specified file; if the file ends in gz
of .bz2 it will be decompressed on the fly.
.TP
\fB\-o\fR  \fB\-\-outpath\fR:
If not specified, output will be written to stdout, otherwise to
the file specified. If the filename ends in .bz2 or .gz, it will
use the appropriate compression. IF NOT it will be written
uncompressed, which probably defeats the point of this program.
.TP
\fB\-H\fR  \fB\-\-noheader\fR:
don't write the mediawiki header
.TP
\fB\-F\fR  \fB\-\-nofooter\fR:
don't write the mediawiki footer
.TP
\fB\-v\fR, \fB\-\-verbose\fR:
Write lots of debugging output to stderr.  This option can be used
multiple times to increase verbosity.
.TP
\fB\-h\fR, \fB\-\-help\fR
Show this help message
.TP
\fB\-V\fR, \fB\-\-version\fR
Display the version of this program and exit
.SH AUTHOR
Written by Ariel T. Glenn.
.SH "REPORTING BUGS"
Report bugs in recompressxml to <https://phabricator.wikimedia.org/>.
.PP
.br
See also checkforbz2footer(1), dumpbz2filefromoffset(1), dumplastbz2block(1),
findpageidinbz2xml(1), writeuptopageid(1)
.SH COPYRIGHT
Copyright \(co 2011, 2012, 2013 Ariel T. Glenn.  All rights reserved.
.PP
This program is free software: you can redistribute it and/or modify it
under the  terms of the GNU General Public License as published by the
Free Software Foundation, either version 2 of the License, or (at your
option) any later version.
.PP
This  program  is  distributed  in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General
Public License for more details.
.PP
You should have received a copy of the GNU General Public License along
with this program.  If not, see <http://www.gnu.org/licenses/>
